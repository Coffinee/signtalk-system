import{r as x,A as D,c as S,B,H as L,O as y,E as j,G as K,C as U}from"./app-96f38ead.js";import{o as b,w as H,h as _,u as q,H as P,t as T,a as w,b as m,v as V,N as k,_ as C,O as Q}from"./focus-management-88c7ad29.js";import{p as Y}from"./use-tree-walker-d692391e.js";import{F as G,c as J,l as R,p as W}from"./use-outside-click-bb552b2d.js";import{b as X}from"./use-resolve-button-type-160266fa.js";function Z(t){throw new Error("Unexpected object: "+t)}var h=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(h||{});function z(t,u){let r=u.resolveItems();if(r.length<=0)return null;let i=u.resolveActiveIndex(),e=i??-1,o=(()=>{switch(t.focus){case 0:return r.findIndex(l=>!u.resolveDisabled(l));case 1:{let l=r.slice().reverse().findIndex((f,p,d)=>e!==-1&&d.length-p-1>=e?!1:!u.resolveDisabled(f));return l===-1?l:r.length-1-l}case 2:return r.findIndex((l,f)=>f<=e?!1:!u.resolveDisabled(l));case 3:{let l=r.slice().reverse().findIndex(f=>!u.resolveDisabled(f));return l===-1?l:r.length-1-l}case 4:return r.findIndex(l=>u.resolveId(l)===t.id);case 5:return null;default:Z(t)}})();return o===-1?i:o}function E(t){return[t.screenX,t.screenY]}function ee(){let t=x([-1,-1]);return{wasMoved(u){let r=E(u);return t.value[0]===r[0]&&t.value[1]===r[1]?!1:(t.value=r,!0)},update(u){t.value=E(u)}}}let A=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function O(t){var u,r;let i=(u=t.innerText)!=null?u:"",e=t.cloneNode(!0);if(!(e instanceof HTMLElement))return i;let o=!1;for(let f of e.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))f.remove(),o=!0;let l=o?(r=e.innerText)!=null?r:"":i;return A.test(l)&&(l=l.replace(A,"")),l}function te(t){let u=t.getAttribute("aria-label");if(typeof u=="string")return u.trim();let r=t.getAttribute("aria-labelledby");if(r){let i=r.split(" ").map(e=>{let o=document.getElementById(e);if(o){let l=o.getAttribute("aria-label");return typeof l=="string"?l.trim():O(o).trim()}return null}).filter(Boolean);if(i.length>0)return i.join(", ")}return O(t).trim()}function ne(t){let u=x(""),r=x("");return()=>{let i=b(t);if(!i)return"";let e=i.innerText;if(u.value===e)return r.value;let o=te(i).trim().toLowerCase();return u.value=e,r.value=o,o}}var le=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(le||{}),ae=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ae||{});function re(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let $=Symbol("MenuContext");function F(t){let u=L($,null);if(u===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,F),r}return u}let ce=D({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:u,attrs:r}){let i=x(1),e=x(null),o=x(null),l=x([]),f=x(""),p=x(null),d=x(1);function n(s=c=>c){let c=p.value!==null?l.value[p.value]:null,v=Q(s(l.value.slice()),I=>b(I.dataRef.domRef)),a=c?v.indexOf(c):null;return a===-1&&(a=null),{items:v,activeItemIndex:a}}let g={menuState:i,buttonRef:e,itemsRef:o,items:l,searchQuery:f,activeItemIndex:p,activationTrigger:d,closeMenu:()=>{i.value=1,p.value=null},openMenu:()=>i.value=0,goToItem(s,c,v){let a=n(),I=z(s===h.Specific?{focus:h.Specific,id:c}:{focus:s},{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});f.value="",p.value=I,d.value=v??1,l.value=a.items},search(s){let c=f.value!==""?0:1;f.value+=s.toLowerCase();let v=(p.value!==null?l.value.slice(p.value+c).concat(l.value.slice(0,p.value+c)):l.value).find(I=>I.dataRef.textValue.startsWith(f.value)&&!I.dataRef.disabled),a=v?l.value.indexOf(v):-1;a===-1||a===p.value||(p.value=a,d.value=1)},clearSearch(){f.value=""},registerItem(s,c){let v=n(a=>[...a,{id:s,dataRef:c}]);l.value=v.items,p.value=v.activeItemIndex,d.value=1},unregisterItem(s){let c=n(v=>{let a=v.findIndex(I=>I.id===s);return a!==-1&&v.splice(a,1),v});l.value=c.items,p.value=c.activeItemIndex,d.value=1}};return G([e,o],(s,c)=>{var v;g.closeMenu(),H(c,_.Loose)||(s.preventDefault(),(v=b(e))==null||v.focus())},S(()=>i.value===0)),B($,g),J(S(()=>q(i.value,{[0]:R.Open,[1]:R.Closed}))),()=>{let s={open:i.value===0,close:g.closeMenu};return P({ourProps:{},theirProps:t,slot:s,slots:u,attrs:r,name:"Menu"})}}}),ve=D({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${T()}`}},setup(t,{attrs:u,slots:r,expose:i}){let e=F("MenuButton");i({el:e.buttonRef,$el:e.buttonRef});function o(d){switch(d.key){case m.Space:case m.Enter:case m.ArrowDown:d.preventDefault(),d.stopPropagation(),e.openMenu(),y(()=>{var n;(n=b(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(h.First)});break;case m.ArrowUp:d.preventDefault(),d.stopPropagation(),e.openMenu(),y(()=>{var n;(n=b(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(h.Last)});break}}function l(d){switch(d.key){case m.Space:d.preventDefault();break}}function f(d){t.disabled||(e.menuState.value===0?(e.closeMenu(),y(()=>{var n;return(n=b(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(d.preventDefault(),e.openMenu(),re(()=>{var n;return(n=b(e.itemsRef))==null?void 0:n.focus({preventScroll:!0})})))}let p=X(S(()=>({as:t.as,type:u.type})),e.buttonRef);return()=>{var d;let n={open:e.menuState.value===0},{id:g,...s}=t,c={ref:e.buttonRef,id:g,type:p.value,"aria-haspopup":"menu","aria-controls":(d=b(e.itemsRef))==null?void 0:d.id,"aria-expanded":t.disabled?void 0:e.menuState.value===0,onKeydown:o,onKeyup:l,onClick:f};return P({ourProps:c,theirProps:s,slot:n,attrs:u,slots:r,name:"MenuButton"})}}}),pe=D({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${T()}`}},setup(t,{attrs:u,slots:r,expose:i}){let e=F("MenuItems"),o=x(null);i({el:e.itemsRef,$el:e.itemsRef}),Y({container:S(()=>b(e.itemsRef)),enabled:S(()=>e.menuState.value===0),accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});function l(n){var g;switch(o.value&&clearTimeout(o.value),n.key){case m.Space:if(e.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),e.search(n.key);case m.Enter:if(n.preventDefault(),n.stopPropagation(),e.activeItemIndex.value!==null){let s=e.items.value[e.activeItemIndex.value];(g=b(s.dataRef.domRef))==null||g.click()}e.closeMenu(),C(b(e.buttonRef));break;case m.ArrowDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(h.Next);case m.ArrowUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(h.Previous);case m.Home:case m.PageUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(h.First);case m.End:case m.PageDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(h.Last);case m.Escape:n.preventDefault(),n.stopPropagation(),e.closeMenu(),y(()=>{var s;return(s=b(e.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case m.Tab:n.preventDefault(),n.stopPropagation(),e.closeMenu(),y(()=>V(b(e.buttonRef),n.shiftKey?k.Previous:k.Next));break;default:n.key.length===1&&(e.search(n.key),o.value=setTimeout(()=>e.clearSearch(),350));break}}function f(n){switch(n.key){case m.Space:n.preventDefault();break}}let p=W(),d=S(()=>p!==null?(p.value&R.Open)===R.Open:e.menuState.value===0);return()=>{var n,g;let s={open:e.menuState.value===0},{id:c,...v}=t,a={"aria-activedescendant":e.activeItemIndex.value===null||(n=e.items.value[e.activeItemIndex.value])==null?void 0:n.id,"aria-labelledby":(g=b(e.buttonRef))==null?void 0:g.id,id:c,onKeydown:l,onKeyup:f,role:"menu",tabIndex:0,ref:e.itemsRef};return P({ourProps:a,theirProps:v,slot:s,attrs:u,slots:r,features:w.RenderStrategy|w.Static,visible:d.value,name:"MenuItems"})}}}),fe=D({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${T()}`}},setup(t,{slots:u,attrs:r,expose:i}){let e=F("MenuItem"),o=x(null);i({el:o,$el:o});let l=S(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===t.id:!1),f=ne(o),p=S(()=>({disabled:t.disabled,get textValue(){return f()},domRef:o}));j(()=>e.registerItem(t.id,p)),K(()=>e.unregisterItem(t.id)),U(()=>{e.menuState.value===0&&l.value&&e.activationTrigger.value!==0&&y(()=>{var a,I;return(I=(a=b(o))==null?void 0:a.scrollIntoView)==null?void 0:I.call(a,{block:"nearest"})})});function d(a){if(t.disabled)return a.preventDefault();e.closeMenu(),C(b(e.buttonRef))}function n(){if(t.disabled)return e.goToItem(h.Nothing);e.goToItem(h.Specific,t.id)}let g=ee();function s(a){g.update(a)}function c(a){g.wasMoved(a)&&(t.disabled||l.value||e.goToItem(h.Specific,t.id,0))}function v(a){g.wasMoved(a)&&(t.disabled||l.value&&e.goToItem(h.Nothing))}return()=>{let{disabled:a}=t,I={active:l.value,disabled:a,close:e.closeMenu},{id:M,...N}=t;return P({ourProps:{id:M,ref:o,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:d,onFocus:n,onPointerenter:s,onMouseenter:s,onPointermove:c,onMousemove:c,onPointerleave:v,onMouseleave:v},theirProps:{...r,...N},slot:I,attrs:r,slots:u,name:"MenuItem"})}}});export{ce as M,ve as R,pe as h,fe as y};
